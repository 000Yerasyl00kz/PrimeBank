<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PrimeBank — Вход / Регистрация</title>
    <link rel="icon" type="image/png" sizes="32x32" href="/img/logopng.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/img/logopng.png">
    <link rel="apple-touch-icon" href="/img/logopng.png">

<!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600&family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">

<style>
    * { box-sizing: border-box; font-family: Roboto, "Open Sans", sans-serif; }

    body {
        margin: 0;
        min-height: 100vh;
        background: linear-gradient(135deg, #0f2027, #203a43, #2c5364);
        display: flex;
        align-items: center;
        justify-content: center;
        color: #111;
    }

    .auth-container {
        background: #fff;
        width: 100%;
        max-width: 420px;
        padding: 32px;
        border-radius: 16px;
        box-shadow: 0 20px 40px rgba(0,0,0,0.15);
        animation: fadeIn 0.6s ease;
    }

    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
    }

    .brand { text-align: center; margin-bottom: 24px; font-size: 24px; font-weight: 700; letter-spacing: 0.5px; }

    .switcher {
        display: flex;
        background: #f1f3f5;
        border-radius: 10px;
        margin-bottom: 24px;
        overflow: hidden;
    }

    .switcher button {
        flex: 1;
        padding: 12px;
        border: none;
        background: transparent;
        cursor: pointer;
        font-weight: 500;
        transition: 0.3s;
    }

    .switcher button.active { background: #203a43; color: #fff; }

    form {
        display: none;
        animation: fade 0.4s ease;
    }

    form.active { display: block; }

    @keyframes fade { from {opacity:0; transform:translateY(5px);} to {opacity:1; transform:translateY(0);} }

    .field { margin-bottom: 16px; }
    .field label { display: block; margin-bottom: 6px; font-size: 14px; color: #555; }
    .field input {
        width: 100%;
        padding: 12px 14px;
        border-radius: 10px;
        border: 1px solid #ccc;
        font-size: 15px;
        outline: none;
        transition: 0.2s;
    }
    .field input:focus { border-color: #203a43; }

    .error { color: #d93025; font-size: 13px; margin-top: 6px; }

    .submit-btn {
        width: 100%;
        padding: 14px;
        border-radius: 12px;
        border: none;
        background: #203a43;
        color: #fff;
        font-size: 16px;
        font-weight: 500;
        cursor: pointer;
        transition: 0.3s;
    }
    .submit-btn:hover { background: #162b33; transform: translateY(-2px); }

    @media (max-width: 480px) {
        .auth-container { padding: 24px 16px; }
        .brand { font-size: 20px; }
        .switcher button { padding: 10px; font-size: 14px; }
        .submit-btn { font-size: 15px; padding: 12px; }
    }
    </style>
</head>
<body>
<div class="auth-container">
    <div class="brand">PrimeBank</div>

    <div class="switcher">
        <button id="loginTab" class="active">Вход</button>
        <button id="registerTab">Регистрация</button>
    </div>

    <!-- LOGIN -->
    <form id="loginForm" class="active">
        <div class="field">
        <label>Номер телефона</label>
        <input type="text" id="loginPhone" placeholder="+7XXXXXXXXXX" />
        </div>
        <div class="field">
        <label>ИИН</label>
        <input type="text" id="loginIIN" placeholder="12 цифр" />
        </div>
        <div class="error" id="loginError"></div>
        <button class="submit-btn">Войти</button>
    </form>

    <!-- REGISTER -->
    <form id="registerForm">
        <div class="field">
        <label>ФИО</label>
        <input type="text" id="fullName" placeholder="Исаев Рамиль" />
        </div>
        <div class="field">
        <label>Номер телефона</label>
        <input type="text" id="regPhone" placeholder="+7XXXXXXXXXX" />
        </div>
        <div class="field">
        <label>ИИН</label>
        <input type="text" id="regIIN" placeholder="12 цифр" />
        </div>
        <div class="field">
        <label>Пароль</label>
        <input type="password" id="password" placeholder="Минимум 8 символов" />
        </div>
        <div class="error" id="registerError"></div>
        <button class="submit-btn">Зарегистрироваться</button>
    </form>
</div>

<script>
    const loginTab = document.getElementById("loginTab");
    const registerTab = document.getElementById("registerTab");
    const loginForm = document.getElementById("loginForm");
    const registerForm = document.getElementById("registerForm");

    loginTab.onclick = () => toggleForms(true);
    registerTab.onclick = () => toggleForms(false);

    function toggleForms(isLogin) {
        loginTab.classList.toggle("active", isLogin);
        registerTab.classList.toggle("active", !isLogin);
        loginForm.classList.toggle("active", isLogin);
        registerForm.classList.toggle("active", !isLogin);
    }

    const phoneMask = (input) => {
        if (!input.value.startsWith("+7")) input.value = "+7";
        input.value = "+7" + input.value.replace(/\D/g, "").slice(1, 11);
    };

    document.querySelectorAll("#loginPhone, #regPhone").forEach(i => {
        i.addEventListener("input", () => phoneMask(i));
    });

    const nameRegex = /^[A-Za-zА-Яа-яЁё]+ [A-Za-zА-Яа-яЁё]+$/;
    const passwordRegex = /^[A-Za-z0-9]{8,}$/;

    // Автозаполнение при загрузке
    window.onload = () => {
        const savedPhone = localStorage.getItem("phone");
        const savedIIN = localStorage.getItem("iin");
        const savedName = localStorage.getItem("name");

        if (savedPhone) loginPhone.value = savedPhone;
        if (savedIIN) loginIIN.value = savedIIN;
        if (savedPhone) regPhone.value = savedPhone;
        if (savedIIN) regIIN.value = savedIIN;
        if (savedName) fullName.value = savedName;
    };

    loginForm.onsubmit = (e) => {
        e.preventDefault();
        const phone = loginPhone.value, iin = loginIIN.value;
        const error = document.getElementById("loginError");
        if (!phone || !iin) { error.textContent = "Все поля обязательны"; return; }
        if (!/^\+7\d{10}$/.test(phone)) { error.textContent = "Неверный номер телефона"; return; }
        if (!/^\d{12}$/.test(iin)) { error.textContent = "ИИН должен состоять из 12 цифр"; return; }

        error.textContent = "";
        // Сохраняем данные в localStorage
        localStorage.setItem("phone", phone);
        localStorage.setItem("iin", iin);

        // Редирект на choice.html
        window.location.href = "choice.html";
    };

    registerForm.onsubmit = (e) => {
        e.preventDefault();
        const name = fullName.value.trim();
        const phone = regPhone.value;
        const iin = regIIN.value;
        const pass = password.value;
        const error = document.getElementById("registerError");

        if (!name || !phone || !iin || !pass) { error.textContent = "Все поля обязательны"; return; }
        if (!nameRegex.test(name)) { error.textContent = "ФИО должно состоять из двух слов (RU или EN)"; return; }
        if (!/^\+7\d{10}$/.test(phone)) { error.textContent = "Неверный номер телефона"; return; }
        if (!/^\d{12}$/.test(iin)) { error.textContent = "ИИН должен состоять из 12 цифр"; return; }
        if (!passwordRegex.test(pass)) { error.textContent = "Пароль минимум 8 символов (английские буквы)"; return; }

        error.textContent = "";
        // Сохраняем данные в localStorage
        localStorage.setItem("name", name);
        localStorage.setItem("phone", phone);
        localStorage.setItem("iin", iin);

        // Редирект на choice.html
        window.location.href = "index.html";
    };
</script>


</body>
</html>